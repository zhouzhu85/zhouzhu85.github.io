---
layout: _port
title: mysql
date: 2022-01-12 10:35:14
tags:
  - mysql
category: 
  - 数据库
  - MySql
---
## 定位慢查询
1. 利用运维工具Skywalking，来监测哪个接口的sql是比较慢的
2. 在mysql中开启慢日志查询，一般设置的值是2秒，一旦执行超过2秒就会记录到日志中，但开启这个只能是在开发调试阶段，生产环境不建议开启，会拖慢mysql性能

## sql语句执行很慢，如何分析
采用mysql自带的分析工具explain
- 通过key和key_len检查是否命中了索引，就是索引本身存在是否有失效的情况
- 通过type字段查看sql是否有进一步的优化空间，是否存在全索引扫描或全盘扫描
- 通过extra建议判断，是否出现了回表的情况，如果出现了，可以尝试添加索引或修改返回字段来修复11

